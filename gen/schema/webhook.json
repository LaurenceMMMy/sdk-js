{"openapi":"3.0.2","info":{"title":"Webhook","description":"Webhook Service.","version":"1.0.40"},"paths":{"/internal-api/v1/user/{user_id}/webhooks":{"post":{"summary":"Add user personal webhook","operationId":"add_user_internal_webhook","parameters":[{"required":true,"schema":{"title":"User Id","type":"string","format":"uuid"},"name":"user_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookIn"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserWebhookOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/internal-api/v1/user/{user_id}/webhooks/{webhook_id}":{"get":{"summary":"Get webhook details","operationId":"get_user_internal_webhook_details","parameters":[{"required":true,"schema":{"title":"User Id","type":"string","format":"uuid"},"name":"user_id","in":"path"},{"required":true,"schema":{"title":"Webhook Id","type":"string","format":"uuid"},"name":"webhook_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserWebhookOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"summary":"Remove user personal webhook by id","operationId":"delete_user_internal_webhooks","parameters":[{"required":true,"schema":{"title":"User Id","type":"string","format":"uuid"},"name":"user_id","in":"path"},{"required":true,"schema":{"title":"Webhook Id","type":"string","format":"uuid"},"name":"webhook_id","in":"path"}],"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/internal-api/v1/user/{user_id}/webhooks/{webhook_id}/endpoints/":{"get":{"summary":"Get webhook endpoint list","operationId":"get_webhook_endpoints","parameters":[{"required":true,"schema":{"title":"Webhook Id","type":"string","format":"uuid"},"name":"webhook_id","in":"path"},{"required":true,"schema":{"title":"User Id","type":"string","format":"uuid"},"name":"user_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Get Webhook Endpoints Internal Api V1 User  User Id  Webhooks  Webhook Id  Endpoints  Get","type":"array","items":{"$ref":"#/components/schemas/EndpointOut"}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"summary":"Get webhook endpoint details","operationId":"add_webhook_endpoint","parameters":[{"required":true,"schema":{"title":"Webhook Id","type":"string","format":"uuid"},"name":"webhook_id","in":"path"},{"required":true,"schema":{"title":"User Id","type":"string","format":"uuid"},"name":"user_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EndpointIn"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Add Webhook Endpoint Internal Api V1 User  User Id  Webhooks  Webhook Id  Endpoints  Post","type":"array","items":{"$ref":"#/components/schemas/EndpointOut"}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/internal-api/v1/user/{user_id}/webhooks/{webhook_id}/endpoints/{endpoint_id}":{"get":{"summary":"Get webhook endpoint details","operationId":"get_webhook_endpoint_by_id","parameters":[{"required":true,"schema":{"title":"Webhook Id","type":"string","format":"uuid"},"name":"webhook_id","in":"path"},{"required":true,"schema":{"title":"Endpoint Id","type":"integer"},"name":"endpoint_id","in":"path"},{"required":true,"schema":{"title":"User Id","type":"string","format":"uuid"},"name":"user_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EndpointOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"summary":"Update webhook endpoint details","operationId":"update_webhook_endpoint_by_id","parameters":[{"required":true,"schema":{"title":"Webhook Id","type":"string","format":"uuid"},"name":"webhook_id","in":"path"},{"required":true,"schema":{"title":"Endpoint Id","type":"integer"},"name":"endpoint_id","in":"path"},{"required":true,"schema":{"title":"User Id","type":"string","format":"uuid"},"name":"user_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EndpointIn"}}},"required":true},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EndpointOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"summary":"Get webhook endpoint details","operationId":"delete_webhook_endpoint_by_id","parameters":[{"required":true,"schema":{"title":"Webhook Id","type":"string","format":"uuid"},"name":"webhook_id","in":"path"},{"required":true,"schema":{"title":"Endpoint Id","type":"integer"},"name":"endpoint_id","in":"path"},{"required":true,"schema":{"title":"User Id","type":"string","format":"uuid"},"name":"user_id","in":"path"}],"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/applications/{application_id}/subscribe":{"post":{"tags":["user"],"summary":"Subscribe current user to application's webhooks","description":"Webhooks must be preconfigured using POST /applications/{application_id}/webhooks","operationId":"user_subscribe","parameters":[{"required":true,"schema":{"title":"Application Id","type":"string"},"name":"application_id","in":"path"}],"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"jwtAuth":[]},{"jwtAuth":[]}],"x-service-auth-scopes":[],"x-service-auth-user":true,"x-service-public":null}},"/api/v1/applications/{application_id}/unsubscribe":{"delete":{"tags":["user"],"summary":"Unsubscribe current user from application's webhooks","operationId":"user_unsubscribe","parameters":[{"required":true,"schema":{"title":"Application Id","type":"string"},"name":"application_id","in":"path"}],"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"jwtAuth":[]}],"x-service-auth-scopes":[],"x-service-auth-user":true,"x-service-public":null}},"/api/v1/applications/{application_id}/user/webhooks":{"post":{"tags":["user"],"summary":"Register user-specific webhooks","operationId":"add_user_specific_webhooks","parameters":[{"required":true,"schema":{"title":"Application Id","type":"string"},"name":"application_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookIn"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"jwtAuth":[]}],"x-service-auth-scopes":[],"x-service-auth-user":true,"x-service-public":null}},"/api/v1/user/webhooks":{"get":{"tags":["user"],"summary":"Get list of user personal webhooks","operationId":"get_user_webhooks_public","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Get User Webhooks Public Api V1 User Webhooks Get","type":"array","items":{"$ref":"#/components/schemas/UserWebhookOut"}}}}}},"security":[{"jwtAuth":[]}],"x-service-auth-scopes":[],"x-service-auth-user":true,"x-service-public":null},"post":{"tags":["user"],"summary":"Add user personal webhook","operationId":"add_user_webhook","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookIn"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserWebhookOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"jwtAuth":[]}],"x-service-auth-scopes":[],"x-service-auth-user":true,"x-service-public":null},"delete":{"tags":["user"],"summary":"Remove all user personal webhooks","operationId":"delete_all_user_webhooks","responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"jwtAuth":[]}],"x-service-auth-scopes":[],"x-service-auth-user":true,"x-service-public":null}},"/api/v1/user/webhooks/tag/{tag}":{"get":{"tags":["user"],"summary":"Get user webhooks by tag","operationId":"get_user_webhooks_public_by_tag","parameters":[{"required":true,"schema":{"title":"Tag","type":"string"},"name":"tag","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Get User Webhooks Public By Tag Api V1 User Webhooks Tag  Tag  Get","type":"array","items":{"$ref":"#/components/schemas/UserWebhookOut"}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"jwtAuth":[]}],"x-service-auth-scopes":[],"x-service-auth-user":true,"x-service-public":null},"delete":{"tags":["user"],"summary":"Remove user personal webhook by id","operationId":"delete_all_user_webhooks_by_tag","parameters":[{"required":true,"schema":{"title":"Tag","type":"string"},"name":"tag","in":"path"}],"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"jwtAuth":[]}],"x-service-auth-scopes":[],"x-service-auth-user":true,"x-service-public":null}},"/api/v1/user/webhooks/{webhook_id}":{"get":{"tags":["user"],"summary":"Get webhook details","operationId":"get_user_webhook_details","parameters":[{"required":true,"schema":{"title":"Webhook Id","type":"string","format":"uuid"},"name":"webhook_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserWebhookOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"jwtAuth":[]}],"x-service-auth-scopes":[],"x-service-auth-user":true,"x-service-public":null},"delete":{"tags":["user"],"summary":"Remove user personal webhook by id","operationId":"delete_user_webhooks","parameters":[{"required":true,"schema":{"title":"Webhook Id","type":"string","format":"uuid"},"name":"webhook_id","in":"path"}],"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"jwtAuth":[]}],"x-service-auth-scopes":[],"x-service-auth-user":true,"x-service-public":null}},"/api/v1/user/webhooks/{webhook_id}/endpoints/":{"get":{"tags":["user"],"summary":"Get webhook endpoint list","operationId":"get_webhook_endpoints","parameters":[{"required":true,"schema":{"title":"Webhook Id","type":"string","format":"uuid"},"name":"webhook_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Get Webhook Endpoints Api V1 User Webhooks  Webhook Id  Endpoints  Get","type":"array","items":{"$ref":"#/components/schemas/EndpointOut"}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"jwtAuth":[]}],"x-service-auth-scopes":[],"x-service-auth-user":true,"x-service-public":null},"post":{"tags":["user"],"summary":"Get webhook endpoint details","operationId":"add_webhook_endpoint","parameters":[{"required":true,"schema":{"title":"Webhook Id","type":"string","format":"uuid"},"name":"webhook_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EndpointIn"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Add Webhook Endpoint Api V1 User Webhooks  Webhook Id  Endpoints  Post","type":"array","items":{"$ref":"#/components/schemas/EndpointOut"}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"jwtAuth":[]}],"x-service-auth-scopes":[],"x-service-auth-user":true,"x-service-public":null}},"/api/v1/user/webhooks/{webhook_id}/endpoints/{endpoint_id}":{"get":{"tags":["user"],"summary":"Get webhook endpoint details","operationId":"get_webhook_endpoint_by_id","parameters":[{"required":true,"schema":{"title":"Webhook Id","type":"string","format":"uuid"},"name":"webhook_id","in":"path"},{"required":true,"schema":{"title":"Endpoint Id","type":"integer"},"name":"endpoint_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EndpointOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"jwtAuth":[]}],"x-service-auth-scopes":[],"x-service-auth-user":true,"x-service-public":null},"put":{"tags":["user"],"summary":"Update webhook endpoint details","operationId":"update_webhook_endpoint_by_id","parameters":[{"required":true,"schema":{"title":"Webhook Id","type":"string","format":"uuid"},"name":"webhook_id","in":"path"},{"required":true,"schema":{"title":"Endpoint Id","type":"integer"},"name":"endpoint_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EndpointIn"}}},"required":true},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EndpointOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"jwtAuth":[]}],"x-service-auth-scopes":[],"x-service-auth-user":true,"x-service-public":null},"delete":{"tags":["user"],"summary":"Get webhook endpoint details","operationId":"delete_webhook_endpoint_by_id","parameters":[{"required":true,"schema":{"title":"Webhook Id","type":"string","format":"uuid"},"name":"webhook_id","in":"path"},{"required":true,"schema":{"title":"Endpoint Id","type":"integer"},"name":"endpoint_id","in":"path"}],"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"jwtAuth":[]}],"x-service-auth-scopes":[],"x-service-auth-user":true,"x-service-public":null}},"/api/v1/applications/{application_id}/webhooks":{"get":{"tags":["developer"],"summary":"Get application webhook configuration","operationId":"webhook_get","parameters":[{"required":true,"schema":{"title":"Application Id","type":"string"},"name":"application_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"jwtAuth":[]}],"x-service-auth-scopes":[],"x-service-auth-user":true,"x-service-public":null},"put":{"tags":["developer"],"summary":"Update webhook configuration for application","operationId":"webhook_update","parameters":[{"required":true,"schema":{"title":"Application Id","type":"string"},"name":"application_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookIn"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"jwtAuth":[]}],"x-service-auth-scopes":[],"x-service-auth-user":true,"x-service-public":null},"post":{"tags":["developer"],"summary":"Create webhook configuration for application","description":"Endpoint can be safely called many times.\nIf configuration does not exist it will be created.\nIf does exist, updated.","operationId":"webhook_create","parameters":[{"required":true,"schema":{"title":"Application Id","type":"string"},"name":"application_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookIn"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"jwtAuth":[]}],"x-service-auth-scopes":[],"x-service-auth-user":true,"x-service-public":null}},"/api/v1/applications/{application_id}/log":{"get":{"tags":["developer"],"summary":"Get webhook http request log","operationId":"get_logs","parameters":[{"required":true,"schema":{"title":"Application Id","type":"string"},"name":"application_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Get Logs Api V1 Applications  Application Id  Log Get","type":"array","items":{"$ref":"#/components/schemas/LogRecordOut"}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"jwtAuth":[]}],"x-service-auth-scopes":[],"x-service-auth-user":true,"x-service-public":null}},"/api/v1/applications/{application_id}":{"delete":{"tags":["developer"],"summary":"Remove webhook configuration for application","description":"Also removes user-specific webhooks associated with the application_id","operationId":"webhook_delete","parameters":[{"required":true,"schema":{"title":"Application Id","type":"string"},"name":"application_id","in":"path"}],"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"jwtAuth":[]}],"x-service-auth-scopes":[],"x-service-auth-user":true,"x-service-public":null}},"/public/.well-known/public.key":{"get":{"tags":["developer"],"summary":"Get public key","description":"Key may be used to validate webhook signature","operationId":"get_signature_public_key","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"EndpointIn":{"title":"EndpointIn","required":["event_type","url"],"type":"object","properties":{"event_type":{"title":"Event Type","type":"string"},"url":{"title":"Url","type":"string"},"enabled":{"title":"Enabled","type":"boolean","default":true}}},"EndpointOut":{"title":"EndpointOut","required":["event_type","url","id"],"type":"object","properties":{"event_type":{"title":"Event Type","type":"string"},"url":{"title":"Url","type":"string"},"enabled":{"title":"Enabled","type":"boolean","default":true},"id":{"title":"Id","type":"integer"},"last_activity":{"title":"Last Activity","type":"string","format":"date-time"},"error_code":{"title":"Error Code","type":"string"}}},"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"LogRecordOut":{"title":"LogRecordOut","required":["id","sent_at","url","method","request_try_no","response_status","success"],"type":"object","properties":{"id":{"title":"Id","type":"integer"},"sent_at":{"title":"Sent At","type":"string","format":"date-time"},"url":{"title":"Url","type":"string"},"method":{"title":"Method","type":"string"},"request_body":{"title":"Request Body","type":"string"},"request_headers":{"title":"Request Headers","type":"string"},"request_try_no":{"title":"Request Try No","type":"integer"},"response_status":{"title":"Response Status","type":"integer"},"response_headers":{"title":"Response Headers","type":"string"},"response_body":{"title":"Response Body","type":"string"},"success":{"title":"Success","type":"boolean"},"error_code":{"title":"Error Code","type":"string"},"error_description":{"title":"Error Description","type":"string"}}},"UserWebhookOut":{"title":"UserWebhookOut","required":["webhook_id","endpoints"],"type":"object","properties":{"application_id":{"title":"Application Id","type":"string"},"developer_id":{"title":"Developer Id","type":"string"},"user_id":{"title":"User Id","type":"string"},"webhook_id":{"title":"Webhook Id","type":"string"},"tag":{"title":"Tag","type":"string"},"endpoints":{"title":"Endpoints","type":"array","items":{"$ref":"#/components/schemas/EndpointOut"}},"last_request":{"$ref":"#/components/schemas/LogRecordOut"}}},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"type":"string"}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}},"WebhookIn":{"title":"WebhookIn","required":["endpoints"],"type":"object","properties":{"tag":{"title":"Tag","type":"string"},"endpoints":{"title":"Endpoints","type":"array","items":{"$ref":"#/components/schemas/EndpointIn"}}}},"WebhookOut":{"title":"WebhookOut","required":["webhook_id","endpoints"],"type":"object","properties":{"application_id":{"title":"Application Id","type":"string"},"developer_id":{"title":"Developer Id","type":"string"},"user_id":{"title":"User Id","type":"string"},"webhook_id":{"title":"Webhook Id","type":"string"},"tag":{"title":"Tag","type":"string"},"endpoints":{"title":"Endpoints","type":"array","items":{"$ref":"#/components/schemas/EndpointOut"}}}}},"securitySchemes":{"jwtAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}